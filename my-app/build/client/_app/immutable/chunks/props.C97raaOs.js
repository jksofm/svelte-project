import{h as O,J as y,b as B,E as Y,d as w,i as M,K as x,q as U,L as G,M as V,P as Z,N as $,u as d,m as z,D as g,O as H,R as J,Q as L,T as K,V as Q,W,S as X,X as j,I as p,Y as k,v as N,Z as ee,_ as ae}from"./runtime.BHQ3mifw.js";import{p as re}from"./proxy.CXpVfyZ2.js";import{c as ne}from"./store.Dmb9GBCp.js";import{l as te}from"./index.BFqC5wTN.js";function _e(r,a,n){O&&y();var f=r,i,t;B(()=>{i!==(i=a())&&(t&&(x(t),t=null),i&&(t=w(()=>n(f,i))))},Y),O&&(f=M)}function C(r){for(var a=N,n=N;a!==null&&!(a.f&(H|J));)a=a.parent;try{return L(a),r()}finally{L(n)}}function le(r,a,n,f){var A;var i=(n&K)!==0,t=!te||(n&Q)!==0,o=(n&W)!==0,D=(n&ee)!==0,R=!1,s;o?[s,R]=ne(()=>r[a]):s=r[a];var F=X in r||j in r,v=((A=U(r,a))==null?void 0:A.set)??(F&&o&&a in r?e=>r[a]=e:void 0),u=f,m=!0,E=!1,I=()=>(E=!0,m&&(m=!1,D?u=g(f):u=f),u);s===void 0&&f!==void 0&&(v&&t&&G(),s=I(),v&&v(s));var _;if(t)_=()=>{var e=r[a];return e===void 0?I():(m=!0,E=!1,e)};else{var T=C(()=>(i?p:k)(()=>r[a]));T.f|=V,_=()=>{var e=d(T);return e!==void 0&&(u=void 0),e===void 0?u:e}}if(!(n&Z))return _;if(v){var q=r.$$legacy;return function(e,l){return arguments.length>0?((!t||!l||q||R)&&v(l?_():e),e):_()}}var P=!1,b=!1,S=ae(s),c=C(()=>p(()=>{var e=_(),l=d(S);return P?(P=!1,b=!0,l):(b=!1,S.v=e)}));return i||(c.equals=$),function(e,l){if(arguments.length>0){const h=l?d(c):t&&o?re(e):e;return c.equals(h)||(P=!0,z(S,h),E&&u!==void 0&&(u=h),g(()=>d(c))),e}return d(c)}}export{_e as c,le as p};
